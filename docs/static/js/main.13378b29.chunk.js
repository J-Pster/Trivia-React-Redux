(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},27:function(e,t,a){},33:function(e,t,a){e.exports=a(58)},42:function(e,t,a){},44:function(e,t,a){},51:function(e,t){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),s=a(14),i=a(13),l=a(19),u=a(30),m=a(31),p=a(15),d={name:"",assertions:0,score:0,gravatarEmail:""};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(p.a)(Object(p.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"CHANGE_SCORE":return Object(p.a)(Object(p.a)({},e),{},{score:e.score+t.payload.score,assertions:e.assertions+t.payload.assertions});case"RESET_STORE":return Object(p.a)(Object(p.a)({},e),{},{name:"",gravatarEmail:"",score:0,assertions:0});default:return e}},g=Object(l.combineReducers)({player:f}),v=Object(l.legacy_createStore)(g,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=v);var b=v,h=a(3),E=a(2),y=a.n(E),k=a(10),w=a(23),O=a(4),j=a(5),x=a(7),N=a(6),S=(a(42),a(17)),C=a.n(S),I=(a(27),a(43),a(44),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Feito com"," ",r.a.createElement("span",{role:"img","aria-label":"Heart"},"\u2764\ufe0f")," ","por Jo\xe3o Pster, Lu\xedsa V. Boas, Jamile, Guilherme S. Garcia."))}}]),a}(r.a.Component)),R=function(e){return{type:"CHANGE_SCORE",payload:{score:e.score,assertions:e.assertions}}},A=a(18),L=function(){var e=localStorage.getItem("token");if(e)return e;return localStorage.setItem("token",""),localStorage.getItem("token")},q=function(e){localStorage.setItem("token",e)},J=function(){var e=localStorage.getItem("ranking");if(e)return e;return localStorage.setItem("ranking",JSON.stringify([])),localStorage.getItem("ranking")},_=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=L())){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,_();case 5:if(a=e.sent,q(a),!a){e.next=9;break}return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:if(null!==(t=e.sent)&&""!==t){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,fetch("https://opentdb.com/api.php?amount=5&token="+t);case 7:return a=e.sent,e.next=10,a.json();case 10:if(0!==e.sent.response_code){e.next=13;break}return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,q(t),e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(e.sent){e.next=5;break}return e.next=5,B();case 5:return e.next=7,G();case 7:return t=e.sent,a=JSON.parse(J()),e.abrupt("return",{token:t,ranking:a});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",B());case 4:return e.next=6,G();case 6:return t=e.sent,e.next=9,fetch("https://opentdb.com/api.php?amount=5&token="+t);case 9:return a=e.sent,e.next=12,a.json();case 12:return n=e.sent,e.abrupt("return",n.results);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).changeInput=function(e){var t=e.target,a=t.id,r=t.value;n.setState(Object(w.a)({},a,r)),n.setState({buttonDisabled:!0},(function(){n.emailValidation()&&n.nameValidation()&&n.setState({buttonDisabled:!1})}))},n.onClickButton=Object(k.a)(y.a.mark((function e(){var t,a,r,c,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.name,r=t.email,c={name:a,email:r},(0,n.props.dispatchLogin)(c),e.next=6,P();case 6:o=e.sent,console.log(o);case 8:case"end":return e.stop()}}),e)}))),n.state={name:"",email:"",buttonDisabled:!0},n}return Object(j.a)(a,[{key:"emailValidation",value:function(){var e=this.state.email;return!(!e||!1===/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e))}},{key:"nameValidation",value:function(){return!(this.state.name.length<3)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.buttonDisabled;return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"Login-body"},r.a.createElement("img",{src:C.a,className:"Login-logo",alt:"logo"}),r.a.createElement("div",{className:"form-group form"},r.a.createElement("h4",null,"Bem vindo, fa\xe7a login para jogar."),r.a.createElement("label",{htmlFor:"name"},"Nome:"," ",r.a.createElement("input",{required:!0,"data-testid":"input-player-name",className:"form-control",id:"name",type:"text",value:t,onChange:this.changeInput})),r.a.createElement("label",{htmlFor:"email"},"E-mail:"," ",r.a.createElement("input",{required:!0,"data-testid":"input-gravatar-email",className:"form-control",id:"email",type:"email",value:a,onChange:this.changeInput})),r.a.createElement(s.c,{to:"/game"},r.a.createElement("input",{"data-testid":"btn-play",className:"btn btn-primary",type:"button",onClick:this.onClickButton,value:"Play",disabled:n})),r.a.createElement(s.c,{to:"/settings"},r.a.createElement("input",{"data-testid":"btn-settings",className:"btn btn-primary",type:"button",value:"Configura\xe7\xf5es"})))),r.a.createElement(I,null))}}]),a}(n.Component);T.defaultProps={history:void 0};var M=Object(i.b)(null,(function(e){return{dispatchLogin:function(t){return e(function(e){return{type:"LOGIN_USER",payload:{name:e.name,email:e.email}}}(t))}}}))(T),H=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),a}(n.Component),V=a(21),F=a.n(V),U=(a(52),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.gravatarEmail,c=F()(n).toString();return r.a.createElement("div",{className:"container-user-info"},r.a.createElement("img",{src:C.a,className:"Trivia-logo Login-logo",alt:"logo"}),r.a.createElement("div",{className:"usuario"},r.a.createElement("div",{className:"jogador"},r.a.createElement("h6",null,"Jogador"),r.a.createElement("p",{"data-testid":"header-player-name"},t)),r.a.createElement("div",{className:"pontuacao"},r.a.createElement("h6",null,"Pontua\xe7\xe3o"),r.a.createElement("p",{"data-testid":"header-score"},a))),r.a.createElement("img",{"data-testid":"header-profile-picture",className:"avatar",src:"https://www.gravatar.com/avatar/".concat(c),alt:"Gravatar de ".concat(t)}))}}]),a}(n.Component)),W=Object(i.b)((function(e){return{name:e.player.name,score:e.player.score,gravatarEmail:e.player.gravatarEmail}}))(U),Z=(a(53),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.state.timer,t=setInterval(n.setCountdown,1e3);e||clearInterval(t)},n.setCountdown=function(){var e=n.state.timer;e>0&&n.setState((function(){return{timer:e-1}})),e||n.setState({timeout:!0})},n.showAnswers=function(){var e=n.props.answers;if(!e)return r.a.createElement("h2",null,"Carregando...");var t=n.state.timeout;return e.map((function(e,a){return r.a.createElement("button",{"data-testid":e.correct?"correct-answer":"wrong-answer-".concat(a),key:a,type:"button",className:"btn btn-secondary",disabled:t,onClick:n.checkAnswers},n.replaceCharacters(e.answer))}))},n.countScore=function(){var e=n.state.timer,t=n.props,a=t.question,r=t.dispatch,c=10+3*e,o=10+2*e,s=10+e;"hard"===a.difficulty&&r(R({score:c,assertions:1})),"medium"===a.difficulty&&r(R({score:o,assertions:1})),"easy"===a.difficulty&&r(R({score:s,assertions:1}))},n.checkAnswers=function(e){var t=n.props.answers,a=n.state.timeout,r=n.props.enableNext;if(!a){var c=e.target.innerHTML;t.find((function(e){return e.answer===c})).correct&&n.countScore(),n.changeButtonColors(),r()}},n.changeButtonColors=function(){if(!n.state.timeout){var e=document.querySelectorAll('[data-testid="correct-answer"]'),t=document.querySelectorAll('[data-testid^="wrong-answer"]');e.forEach((function(e){e.style.backgroundColor="rgb(6, 240, 15)",e.style.border="3px solid rgb(6, 240, 15)"})),t.forEach((function(e){e.style.backgroundColor="red",e.style.border="3px solid red"}))}},n.lockButtons=function(){n.setState((function(){return{timeout:!0}}))},n.replaceCharacters=function(e){return e.replace(/&quot;/gim,'"').replace(/&#039;|&prime;|&rsquo;/gim,"\xb4").replace(/&atilde;/gim,"\xe3").replace(/&otilde;/gim,"\xf5").replace(/&ntilde;/gim,"\xf1").replace(/&eacute;/gim,"\xe9").replace(/&aacute;/gim,"\xe1").replace(/&agrave;/gim,"\xe0").replace(/&egrave;/gim,"\xe8").replace(/&auml;/gim,"\xe4").replace(/&ouml;/gim,"\xf6").replace(/&acirc;/gim,"\xe2").replace(/&ecirc;/gim,"\xea").replace(/&ocirc;/gim,"\xf4").replace(/&ccedil;/gim,"\xe7").replace(/&amp;/gim,"&")},n.state={timer:30,timeout:!1},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state.timer,t=this.props.question;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:e<6&&"timer"},e),r.a.createElement("h3",{"data-testid":"question-category"},t.category),r.a.createElement("h1",{"data-testid":"question-text"},this.replaceCharacters(t.question)),r.a.createElement("div",{"data-testid":"answer-options",className:"answers-list"},this.showAnswers()))}}]),a}(r.a.Component)),K=Object(i.b)()(Z),$=(a(54),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).createAnswers=function(t){t.forEach((function(t){var a=t.incorrect_answers,n=[{answer:t.correct_answer,correct:!0}].concat(a.map((function(e){return{answer:e,correct:!1}}))),r=n.sort((function(){return Math.random()-.5}));e.setState((function(e){return{allAnswers:[].concat(Object(A.a)(e.allAnswers),[r])}}))}))},e.componentDidMount=Object(k.a)(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.history,t.next=3,Q();case 3:null===(n=t.sent)&&a.push("/"),e.setState({loading:!1,index:0,allQuestions:n},(function(){return e.createAnswers(n)}));case 6:case"end":return t.stop()}}),t)}))),e.showQuestion=function(){var t=e.state,a=t.allQuestions,n=t.allAnswers,c=t.index;return t.loading?r.a.createElement("h1",null,"Carregando..."):r.a.createElement(K,{key:c,question:a[c],answers:n[c],enableNext:e.enableNext})},e.changeQuestion=function(){var t=e.state,a=t.index,n=t.allQuestions,r=e.props.history;a===n.length-1?r.push("/feedback"):e.setState((function(e){return{index:e.index+1}}),(function(){e.setState({next:!1})}))},e.enableNext=function(){e.setState({next:!0})},e.state={loading:!0,next:!1,index:0,allQuestions:[],allAnswers:[]},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state.next;return r.a.createElement("div",{className:"game-page"},r.a.createElement(W,null),r.a.createElement("div",{className:"game-container content-wrap"},this.showQuestion(),e&&r.a.createElement("button",{"data-testid":"btn-next",type:"button",onClick:this.changeQuestion},"Pr\xf3xima pergunta")),r.a.createElement(I,null))}}]),a}(n.Component));$.defaultProps={history:void 0};var z=$,X=(a(55),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"feedback-page"},r.a.createElement(W,null),r.a.createElement("div",{className:"feedback-container content-wrap"},r.a.createElement("div",{"data-testid":"feedback-text"},t<3?"Could be better...":"Well Done!"),r.a.createElement("div",null,"Pontua\xe7\xe3o final:",r.a.createElement("span",{"data-testid":"feedback-total-score"},a)),r.a.createElement("div",null,"Respostas certas:",r.a.createElement("span",{"data-testid":"feedback-total-question"},t)),r.a.createElement(s.c,{to:"/"},r.a.createElement("input",{"data-testid":"btn-play-again",type:"button",value:"Jogar Novamente"})),r.a.createElement(s.c,{to:"/ranking"},r.a.createElement("input",{"data-testid":"btn-ranking",type:"button",value:"Ranking"}))),r.a.createElement(I,null))}}]),a}(n.Component)),Y=Object(i.b)((function(e){return{name:e.player.name,gravatarEmail:e.player.gravatarEmail,assertions:e.player.assertions,score:e.player.score}}))(X),ee=(a(56),function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).componentDidMount=Object(k.a)(y.a.mark((function t(){var a,n,r,c,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.name,r=a.score,c=a.gravatarEmail,o=F()(c).toString(),e.addLocalRanking(n,r,o),e.setState({storage:JSON.parse(localStorage.getItem("ranking"))});case 4:case"end":return t.stop()}}),t)}))),e.getLocalRanking=function(){var e=localStorage.getItem("ranking");if(e)return e;return localStorage.setItem("ranking",JSON.stringify([])),localStorage.getItem("ranking")},e.addLocalRanking=function(t,a,n){var r=JSON.parse(e.getLocalRanking()),c=[].concat(Object(A.a)(r),[{name:t,score:a,picture:n}]);localStorage.setItem("ranking",JSON.stringify(c))},e.emOrdem=function(e){return e.sort((function(e,t){return parseInt(e.score,10)>parseInt(t.score,10)?-1:parseInt(e.score,10)<parseInt(t.score,10)?1:0})),e},e.state={storage:[]},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.dispatchZerar,t=this.state.storage,a=this.emOrdem(t),n=this.props,c=n.name,o=n.score,i=n.gravatarEmail,l=F()(i).toString();return r.a.createElement("div",{className:"ranking-page"},r.a.createElement("div",{className:"container-user-info"},r.a.createElement("img",{src:C.a,className:"Trivia-logo Login-logo",alt:"logo"}),r.a.createElement("div",{className:"usuario"},r.a.createElement("div",{className:"jogador"},r.a.createElement("h6",null,"Jogador"),r.a.createElement("p",null,c)),r.a.createElement("div",{className:"pontuacao"},r.a.createElement("h6",null,"Pontua\xe7\xe3o"),r.a.createElement("p",null,o))),r.a.createElement("img",{"data-testid":"header-profile-picture",className:"avatar",src:"https://www.gravatar.com/avatar/".concat(l),alt:"Gravatar de ".concat(c)})),r.a.createElement("h1",{"data-testid":"ranking-title"},"RANKING"),r.a.createElement("div",{className:"ranking-container content-wrap"},a.map((function(e,t){var a=e.name,n=e.score,c=e.emailHash;return r.a.createElement("div",{key:t,className:"ranking-item"},r.a.createElement("h4",null,r.a.createElement("span",null,"".concat(t+1,"\xba. ")," "),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},a)),r.a.createElement("h4",{"data-testid":"player-score-".concat(t)},n),r.a.createElement("img",{className:"avatar",src:"https://www.gravatar.com/avatar/".concat(c),alt:"Gravatar de ".concat(a)}))})),r.a.createElement(s.c,{to:"/"},r.a.createElement("input",{"data-testid":"btn-go-home",type:"button",value:"Inicio",onClick:function(){return e()}})),r.a.createElement(I,null)))}}]),a}(n.Component)),te=Object(i.b)((function(e){return{name:e.player.name,gravatarEmail:e.player.gravatarEmail,assertions:e.player.assertions,score:e.player.score}}),(function(e){return{dispatchZerar:function(){e({type:"RESET_STORE"})}}}))(ee);function ae(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:M}),r.a.createElement(h.a,{exact:!0,path:"/settings",component:H}),r.a.createElement(h.a,{exact:!0,path:"/game",component:z}),r.a.createElement(h.a,{exact:!0,path:"/feedback",component:Y}),r.a.createElement(h.a,{exact:!0,path:"/ranking",component:te}))}a(57);o.a.render(r.a.createElement(s.a,null,r.a.createElement(s.b,{basename:"/"},r.a.createElement(i.a,{store:b},r.a.createElement(ae,null)))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.13378b29.chunk.js.map